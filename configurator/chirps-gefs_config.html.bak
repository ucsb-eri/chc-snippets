<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Climate Services Dashboard | Climate Hazards Center - UC Santa Barbara</title>
  <style>
    /* --- Reset & General Styling --- */
    *, *::before, *::after {
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Helvetica Neue", Arial, sans-serif;
      display: flex;
      flex-direction: column;
      background-color: #f8f9fa;
      color: #333;
    }

    a {
      text-decoration: none;
      color: #003660;
    }

    a:hover {
      text-decoration: underline;
    }

    h1, h2 {
      color: #003660;
      margin: 0 0 10px 0;
    }

    /* --- Header --- */
    .header {
      background-color: #003660;
      color: white;
      padding: 0;
    }

    .header table {
      width: 100%;
      border-collapse: collapse;
    }

    .header a {
      color: white;
      font-weight: 500;
      font-size: 14px;
    }

    .header img {
      display: block;
    }
	/* --- Footer --- */
    .footer {
      background-color: #003660;
      color: white;
      padding: 0;
    }

    .footer table {
      width: 100%;
      border-collapse: collapse;
    }

    .footer td {
      vertical-align: middle;
    }

    .footer a {
      color: white;
      margin: 0 8px;
      font-weight: 500;
    }

    .footer img {
      display: inline-block;
      width: 33px;
      height: 33px;
      margin-left: 6px;
      vertical-align: middle;
    }
  </style>
</head>

<body>

  <!-- ====== Header ====== -->
  <div class="header">
    <table>
      <!-- Top row: Logo left, UCSB text right -->
      <tr>
        <td style="padding:5px 15px;">
          <a href="https://chc.ucsb.edu">
            <img src="CHC_logo_white.png" alt="Climate Hazards Center - UC Santa Barbara" style="width:175px; height:auto;">
          </a>
        </td>
        <td style="padding:5px 20px; text-align:right;">
          <a href="http://www.ucsb.edu">University of California,<br>Santa Barbara</a>
        </td>
      </tr>

      <!-- Navigation row -->
      <tr>
        <td colspan="2" style="text-align:center; padding:5px 0;">
          <a href="https://chc.ucsb.edu/about">About</a> |
          <a href="https://chc.ucsb.edu/people">People</a> |
          <a href="https://chc.ucsb.edu/research">Publications</a> |
          <a href="https://chc.ucsb.edu/tools">Tools</a> |
          <a href="https://chc.ucsb.edu/data">Data Sets</a> |
          <a href="https://chc.ucsb.edu/monitoring">Monitoring & Forecasting</a> |
          <a href="https://chc.ucsb.edu/news">News</a> |
          <a href="https://chc.ucsb.edu/activities">Activities</a>
        </td>
      </tr>
    </table>
  </div>

  <!--  Header End ------------ -->



  <body>
    <h1>CHIRPS-GEFS Snippet Configurator</h1>
    <br>
    <h3>Configure Snippet code</h3>
    <p>
      To configure your CHIRPS-GEFS EWX Map Snippet, enter a unique Snippet ID and select the desired Periodicity and Statistic of coverage, below.
      Enter the Width and Height of your Snippet, the Center Latitude and Longitude and the Zoom level of the map. You can
      also choose to enable or disable the time navigation controls of periodicities and years for the Snippet.
      Then click the Preview Snippet button to view the Snippet as it would appear in your web page. Close the preview page
      and make any adjustments and repeat as neccesary. When you have configured the Snippet to your satisfaction,
      click the Create Configuration button to generate the HTML code for the Snippet.
    </p>
    <h3>Configure your web page with Snippet code</h3>
    <p>
      Copy and paste the first or second line of code and paste it above the intended location of the first EWX map in your web page.
      You will need to copy the ewxmapG5.js file to the same directory as your web page to use the first line.
      Make sure this line appears only once in your page. Place the &ltdiv&gt line at the location you want the
      Snippet to appear. Note that the Snippet ID must be unique for each Snippet on the web page.
    </p>
    <p>
      Then copy the remainder of the code into your web page to view the Snippet.
      You can make any adjustments
      to the parameters, in the web page, to get the Snippet exactly how you want it to appear.
    </p>
    <br>
    <div class="clear-float"></div>
    <hr />
    <table class="table1" style="width:50%;background-color:#e5f5f9">
      <!-- table class="table1" style="width:50%;" align="center" -->
      <tr>
        <td class="td1">
          <form onSubmit={event.preventDefault()}>
            <label form="width"><b>Snippet ID:</b></label>
            <br>
            <input type="text" id="snippetId" name="snippetId" value="mySnippet"><br>
          </form>
        </td>
        <td class="td1">
          <p>
            <b> Select Forecast Period:</b>
            <br>
            <select id="forecastPeriod">
              <option value="05day">5 Day</option>
              <option value="10day">10 Day</option>
              <option value="15day">15 Day</option>
            </select>
          </p>
        </td>
      </tr>
      <tr>
        <td class="td1">
          <form onSubmit={event.preventDefault()}>
            <label for="width"><b>Width:</b></label>
            <br>
            <input type="text" id="width" name="width" value="1000">
            <br>
          </form>
        </td>
        <td class="td1">
          <p>
            <b> Select Statistic:</b>
            <br>
            <select id="statistic">
              <option value="data"><b>Data<b></option>
              <option value="anomaly">Anomaly</option>
              // anom for CHIRPS
              <option value="zscore">Z-score</option>
            </select>
          </p>
        </td>
      </tr>
      <tr>
        <td class="td1">
          <form onSubmit={event.preventDefault()}>
            <label for="height"><b>Height:</b></label>
            <br>
            <input type="text" id="height" name="height" value="600">
          </form>
        </td>
        <td class="td1">
          <p>
            <b> Show Periodicity Control:</b>
            <br>
            <select id="periodControl">
              <option value="true">True</option>
              <option value="false">False</option>
            </select>
          </p>
        </td>
      </tr>
      <tr>
        <td class="td1">
          <form onSubmit={event.preventDefault()}>
            <label for="zoom"><b>Zoom:</b></label>
            <br>
            <input type="text" id="zoom" name="zoom" value="3.33">
          </form>
        </td>
        <td class="td1">
          <p>
            <b> Show Year Control:</b>
            <br>
            <select id="yearControl">
              <option value="true">True</option>
              <option value="false">False</option>
            </select>
          </p>
        </td>
      </tr>
      <tr>
        <td class="td1">
          <form onSubmit={event.preventDefault()}>
            <label for="latitude"><b>Center latitude:</b></label><br>
            <input type="text" id="latitude" name="latitude" value="0.0">
          </form>
        </td>
        <td class="td1">
          <form onSubmit={event.preventDefault()}>
            <label for="longitude"><b>Center longitude:</b></label><br>
            <input type="text" id="longitude" name="longitude" value="19.5">
          </form>
          <br>
        </td>
      </tr>
    </table>


    <br>
    <br>
    <button onclick="displaySnippet()">Preview Snippet</button>
    <br>
    <br>
    <br>
    <button onclick="getOptions()"> Create Configuration </button>
    <br><br><br>
    <p id="js_code_view"></p>
    <br>

    <script type="text/javascript" src="file:///Users/marty/Projects/Snippets/chc-snippets/configurator/ewxmapG5.js"></script>
    <!-- script type="text/javascript" src="https://climateservices.chc.ucsb.edu/ewxmapG5.js"></script -->

    <script type="text/javascript">
      console.log('');
      console.log('---------------------');
      console.log('in startup... chirps-gefs_config.html');
      console.log('URL: ', window.location.href);
      console.log('document.URL: ', document.URL);
      console.log('---------------------');

      function displaySnippet() {

          snippetId = document.querySelector('#snippetId').value;
          forecastPeriod = document.querySelector('#forecastPeriod').value;
          width = document.querySelector('#width').value;
          height = document.querySelector('#height').value;
          zoom = document.querySelector('#zoom').value;
          latitude = document.querySelector('#latitude').value;
          longitude = document.querySelector('#longitude').value;
          statistic = document.querySelector('#statistic').value;
          periodControl = document.querySelector('#periodControl').value;
          yearControl = document.querySelector('#yearControl').value;

          var config_str="chirps-gefs_snippet.html?"+
            "snippetId="+snippetId+
            "&height="+height+
            "&width="+width+
            "&forecastPeriod="+forecastPeriod+
            "&statistic="+statistic+
            "&latitude="+latitude+
            "&longitude="+longitude+
            "&zoom="+zoom+
            "&periodControl="+periodControl+
            "&yearControl="+yearControl;

          console.log("config_str: ", config_str)

          let buffer = 10;
          let windowWidth = Number(width) + buffer;
          let windowHeight = Number(height) + buffer;
          //console.log("width="+windowWidth+",height="+windowHeight);
          //var myWindow = window.open(config_str, "_blank","width="+windowWidth+",height="+windowHeight);
          var myWindow = window.open(config_str, "_blank","width="+width+",height="+height);

          console.log('leaving displaySnippet... chirps-gefs_config.html');
      }

      function getOptions() {
          element = document.querySelector('#snippetId');
          snippetId = element.value;

          element = document.querySelector('#forecastPeriod');
          forecastPeriod = element.value;

          element = document.querySelector('#statistic');
          statistic = element.value;

          element = document.querySelector('#width');
          width = element.value;

          element = document.querySelector('#height');
          height = element.value;

          element = document.querySelector('#zoom');
          zoom = element.value;

          element = document.querySelector('#latitude');
          latitude = element.value;

          element = document.querySelector('#longitude');
          longitude = element.value;

          element = document.querySelector('#periodControl');
          periodControl = element.value;

          element = document.querySelector('#yearControl');
          yearControl = element.value;

          let txt = "<table style='border:1px solid black; background-color:#e5f5e0;'><tr><td><br>";
          txt += '&nbsp;&nbsp;&ltscript src="./ewxmapG5.js"&gt&lt/script&gt' + "<br>";
          txt += '&nbsp;&nbsp;or'  + "<br>";
          txt += '&nbsp;&nbsp;&ltscript src="https://climateservices.chc.ucsb.edu/ewxmapG5.js"&gt&lt/script&gt' + "<br>";
          txt += "<br><br>";
          txt += "&nbsp;&nbsp;&ltdiv id='" + snippetId + "'&gt&lt/div&gt" + "<br>";
          txt += "<br><br>";
          txt += '&nbsp;&nbsp;&ltscript type="text/javascript"&gt' + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;new EwxMapG5({" + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ewxUrl: 'https://ewx3.chc.ucsb.edu/ewx', " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id: '" + snippetId + "', " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataset: 'CHIRPSGEFS', " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subDataset: 'chirps_gefs', " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;region: 'global', " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;periodicity: '1-day', " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;period: 'latest', " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forecastPeriod: '" + forecastPeriod + "', " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showDekadControl: " + periodControl + ", " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showYearControl: " + yearControl + ", " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;units: 'mm', " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;statistic: '" + statistic + "', " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width: " + width + ", " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height: " + height + ", " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zoom: " + zoom + ", " + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;center: [" + latitude + ", " + longitude + "]," + "<br>";
          txt += "&nbsp;&nbsp;&nbsp;&nbsp;});" + "<br>";
          txt += "&nbsp;&nbsp;&lt/script&gt" + "<br><br>";
          txt += "</td></tr></table><br>";

          //console.log('getOptions txt: ', txt);

          document.getElementById("js_code_view").innerHTML = txt;

      }

    </script>
     <!-- ====== Footer ====== -->
  <div class="footer">
    <table>
      <!-- Top row: Left text, right social icons -->
      <tr>
        <td style="padding:10px 15px; color:#ffffff;">
          <p style="margin:0;">
            <strong>Climate Hazards Center</strong><br>
            UC Santa Barbara<br>
            Santa Barbara, CA 93106
          </p>
        </td>
        <td style="padding:10px 15px; text-align:right;">
          <a href="https://x.com/climatehazards" target="_blank">
            <img src="https://chc.ucsb.edu/sites/default/themes/at_lsit/images/department/logo-white.png" alt="X">
          </a>
          <a href="https://www.facebook.com/climatehazardscenter/" target="_blank">
            <img src="https://chc.ucsb.edu/sites/default/themes/at_lsit/images/department/facebook.png" alt="Facebook">
          </a>
          <a href="https://www.instagram.com/ucsb_chc/?hl=en" target="_blank">
            <img src="https://chc.ucsb.edu/sites/default/themes/at_lsit/images/department/instagram.png" alt="Instagram">
          </a>
          <a href="https://www.linkedin.com/company/climate-hazards-center/about/" target="_blank">
            <img src="https://chc.ucsb.edu/sites/default/themes/at_lsit/images/department/linkedin100.png" alt="LinkedIn">
          </a>
        </td>
      </tr>

      <!-- Bottom row: links -->
      <tr>
        <td colspan="2" style="text-align:center; padding:8px 0;">
          <a href="http://www.college.ucsb.edu">College of Letters and Science</a> |
          <a href="http://www.ucsb.edu">UC Santa Barbara</a> |
          <a href="https://chc.ucsb.edu/accessibility">Accessibility</a> |
          <a href="http://www.policy.ucsb.edu/terms_of_use/">Appropriate Use</a> |
          <a href="http://www.policy.ucsb.edu/privacy-notification/">Privacy</a> |
          <a href="mailto:dcalaso@ucsb.edu">Webmaster</a>
        </td>
      </tr>

      <!-- Copyright -->
      <tr>
        <td colspan="2" style="text-align:center; padding:5px 0; font-size:13px;">
          &copy;2026 The Regents of the University of California. All Rights Reserved.
        </td>
      </tr>
    </table>
  </div>
</body>
</html>
