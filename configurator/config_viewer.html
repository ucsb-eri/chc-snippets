<!DOCTYPE html>
<html lang="en">

<head>


    <meta charset="utf-8" />

    <title>EWX Snippets: Display an Auto-updated Map of Our Data on Your Website | Climate Hazards Center - UC Santa Barbara</title>

    </style>



</head>



<body>

    <script type="text/javascript" src="https://snippets.chc.ucsb.edu/ewxmapG5.js"></script>

    <div id="snippet_view"></div>

    <script type="text/javascript">

    console.log('');
    console.log('---------------------');
    console.log('in startup... chirps_test.html');
    console.log('URL: ', window.location.href);
    console.log('document.URL: ', document.URL);
    console.log('search: ', window.location.search);
    console.log('---------------------');


    let urlString = document.URL;
    let paramString = urlString.split('?')[1];
    let params_arr = paramString.split('&');
    for(let i = 0; i < params_arr.length; i++) {
        let pair = params_arr[i].split('=');
        console.log("Key is:" + pair[0]);
        console.log("Value is:" + pair[1]);
    }

    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);

    const width = urlParams.get('width');
    const height = urlParams.get('height');
    const periodicity = urlParams.get('periodicity');
    const statistic = urlParams.get('statistic');
    const latitude = urlParams.get('latitude');
    const longitude = urlParams.get('longitude');
    const zoom = urlParams.get('zoom');
    console.log('width: ', width);
    console.log('zoom: ', zoom);

    console.log('---------------------');

      new EwxMapG5({
        ewxUrl: 'https://ewx3.chc.ucsb.edu/ewx',
        id: 'snippet_view',
        dataset: 'CHIRPSGEFS',
        subDataset: 'chirps_gefs',
        region: 'global',
        periodicity: '1-day',
        forecastPeriod: periodicity,
        period: 'latest',
        showDekadControl: true,
        showYearControl: true,
        units: 'mm',
        statistic: statistic,
        width: width,
        height: height,
        time: '2021-10-01',
        zoom: zoom,
        center: [latitude, longitude],
      });

    </script>

</body>

</html>
